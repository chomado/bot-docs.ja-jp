---
title: 会話をボットから人間に移行する | Microsoft Docs
description: ユーザーがボットとの会話を開始した後、人間に引き継ぐ必要がある場合のための設計方法を説明します。
author: matvelloso
ms.author: mateusv
manager: kamrani
ms.topic: article
ms.service: bot-service
ms.date: 12/13/2017
ms.openlocfilehash: 6b50df60c3a8165198e8f9a55964f2f596d62406
ms.sourcegitcommit: b78fe3d8dd604c4f7233740658a229e85b8535dd
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/24/2018
ms.locfileid: "49998729"
---
# <a name="transition-conversations-from-bot-to-human"></a>会話をボットから人間に移行する

ボットがどれくらいの人工知能を持っているかにかかわらず、会話を人間に引き継ぐ必要があるときがあります。 ボットは、いつ引き継ぎが必要であるかを認識し、ユーザーに明確でスムーズな移行を提供する必要があります。

## <a name="scenarios-that-require-human-involvement"></a>人間の介入を必要とするシナリオ

さまざまなシナリオで、ボットが会話の制御を人間に移行することが必要になる場合があります。 そのようなシナリオとして、*トリアージ*、*エスカレーション*、*監督*などがあります。 

### <a name="triage"></a>トリアージ

典型的なヘルプ デスクの電話は、ボットが簡単に答えることができる非常に基本的な質問から始まります。 ユーザーからの受信要求に対する最初のレスポンダーとして、ボットはユーザーの名前、住所、問題の説明、またはその他の関連情報を収集し、その後、会話の制御をエージェントに移行することができます。 ボットを使用して受信要求をトリアージすると、エージェントは情報の収集ではなく問題の解決に専念できます。

### <a name="escalation"></a>エスカレーション

ヘルプ デスクのシナリオでは、ボットは情報の収集だけでなく、基本的な質問に答えたり、ユーザーのパスワードをリセットするなど、簡単な問題を解決したりすることができます。 しかし、ユーザーの問題が人間の関与を必要とするほど複雑であることが会話で判明した場合、ボットはその問題を人間のエージェントにエスカレーションする必要があります。 この種類のシナリオを実装するには、ボットが独自に解決できる問題と、人間にエスカレーションしなければならない問題を、ボットが区別できる必要があります。 会話の制御を人間に移行する必要があるとボットが判断できる方法は、たくさんあります。 

#### <a name="user-driven-menus"></a>ユーザー主導型のメニュー

おそらく、ボットでこのジレンマに対処する最も簡単な方法は、オプションのメニューをユーザーに提示することです。 ボットが個別に処理できるタスクは、[Chat with an agent]\(エージェントとのチャット\) というリンクの上のメニューに表示されます。 この種の実装には、高度な機械学習や自然言語の知識は不要です。 ボットは、ユーザーが [Chat with an agent]\(エージェントとのチャット\) オプションを選択したときに、単に人間のエージェントに会話の制御を移行するだけです。 

#### <a name="scenario-driven"></a>シナリオ主導型

ボットは、シナリオを自身で処理できると判断したかどうかに基づいて、制御を移行するかどうかを決定することができます。 ボットはユーザーの要求に関する情報を収集し、その後、機能の内部リストに対してクエリを行って、その要求に対処できるかどうかを判断します。 ボットが要求に対処できると判断した場合は対処しますが、要求が解決できる問題の範囲を超えていると判断した場合は、会話の制御を人間のエージェントに移行します。

#### <a name="natural-language"></a>自然言語

自然言語の理解と感情分析は、ボットが会話の制御を人間のエージェントにいつ移行するかを判断するために役立ちます。 これは、ユーザーがいつフラストレーションを感じ、人間のエージェントと話したくなるかを判断しようとするときに特に重要です。 
 
ボットは、感情を推論するために <a href="https://www.microsoft.com/cognitive-services/en-us/text-analytics-api" target="blank">Text Analytics API</a> を使用するか、<a href="https://www.luis.ai" target="_blank">LUIS API</a> を使用して、ユーザーのメッセージの内容を分析します。 


> [!TIP]
> 自然言語の理解は、ボットがいつ人間に会話の制御を移行すればよいかを決定するうえで、常に最良の方法であるとは限りません。 ボットは、人間のように、常に正しく推測するとは限らず、不適切な応答はユーザーを苛立たせます。 しかし、ユーザーがメニューから有効な選択肢を選択すると、ボットは常にその入力に適切に応答します。 

### <a name="supervision"></a>監督

場合によっては、人間のエージェントが、制御を受け取るのではなく、会話を監視したいケースもあります。

例として、ボットがユーザーと対話してコンピューターの問題を診断するヘルプ デスクのシナリオを考えてみましょう。 機械学習モデルは、ボットが問題の最も可能性の高い原因を特定するうえで役立ちますが、ボットは特定の行動を取るようにユーザーに助言する前に、内部的に人間のエージェントに診断と対処法を確認し、続行の許可を要求することができます。 その後、エージェントがボタンをクリックし、ボットがユーザーにソリューションを提示して、問題が解決されます。 これでもボットが作業の大半を実行していますが、エージェントが最終決定の制御を保持します。 

## <a name="transitioning-control-of-the-conversation"></a>会話の制御の移行 

ボットは、会話の制御を人間に移行すると決定した場合、移行中であることをユーザーに知らせ、エージェントが利用可能になったことを確認するまで会話を "待機中" の状態にすることができます。 

ボットは、人間を待機している間、すべての受信ユーザー メッセージに既定の応答 ("キューで待機中" など) で自動的に答えることができます。 さらに、ユーザーが "対応不要" や "キャンセル" などの特定のメッセージを送信してきた場合は、ボットに "待機中" の状態の会話を削除させることができます。

待機中のユーザーにエージェントを割り当てる方法は、ボットの設計時に指定します。 たとえば、ボットは単純なキュー システムである "先入れ先出し" を実装することができます。より複雑なロジックでは、地理、言語、またはその他の要因に基づいてエージェントにユーザーを割り当てます。 ボットは、ユーザーを選択するために使用できるいくつかの種類の UI をエージェントに提示することもできます。 エージェントが利用可能になると、エージェントはボットに接続して会話に参加します。

> [!IMPORTANT]
> エージェントが関与した後でも、ボットは会話の舞台裏でファシリテーターであり続けます。 ユーザーとエージェントが互いに直接通信することはありません。ボットを介してメッセージをルーティングするだけです。 

## <a name="routing-messages-between-user-and-agent"></a>ユーザーとエージェントの間でのメッセージのルーティング

エージェントがボットに接続すると、ボットはユーザーとエージェントの間でメッセージのルーティングを開始します。 ユーザーとエージェントには互いが直接チャットしているように見えるかもしれませんが、実際にはボットを介してメッセージを交換しています。 ボットは、ユーザーからメッセージを受信してエージェントに送信し、次にエージェントからメッセージを受信してユーザーに送信します。 

> [!NOTE]
> より高度なシナリオでは、ボットはユーザーとエージェントの間で単にメッセージをルーティングするだけでなく、責任を引き受けることができます。 たとえば、どの応答が適切であるかをボットが判断し、エージェントに続行の確認だけを求めるようにすることもできます。

## <a name="sample-code"></a>サンプル コード

Bot Builder SDK for Node.js を使用してボットから人間に会話を引き継ぐ方法を示す完全なサンプルについては、GitHub の <a href="https://github.com/palindromed/Bot-HandOff" target="_blank">Bot-HandOff サンプル</a>を参照してください。

## <a name="additional-resources"></a>その他のリソース

::: moniker range="azure-bot-service-4.0"

- [ダイアログ](v4sdk/bot-builder-dialog-manage-conversation-flow.md)
- <a href="https://www.microsoft.com/cognitive-services/en-us/text-analytics-api" target="blank">Text Analytics API</a>

::: moniker-end

::: moniker range="azure-bot-service-3.0"

- [ダイアログで会話フローを管理する (.NET)](~/dotnet/bot-builder-dotnet-manage-conversation-flow.md)
- [ダイアログで会話フローを管理する (Node.js)](~/nodejs/bot-builder-nodejs-manage-conversation-flow.md)
- <a href="https://www.microsoft.com/cognitive-services/en-us/text-analytics-api" target="blank">Text Analytics API</a>


::: moniker-end

